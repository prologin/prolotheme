{{ define "title" }} {{ .Site.Title }} | {{ .Title }} {{ end }} {{ define "main"
}}
<div class="progress-bar"></div>
<div class="article-title-box">
    <h1 class="article-title">{{ .Title }}</h1>
    <p class="article-subtitle">{{ .Params.subtitle }}</p>
    {{ if isset .Params "code_stub_url" }}
    <a href="{{ .Params.code_stub_url }}" class="code-stub-button" download
        >Code à compléter</a
    >
    {{ end }}
</div>

{{- $files := .Resources.Match "section*.md" -}}
{{- $ContentSections := sort $files "Name" "asc" -}}
{{- $ContentLen := len $ContentSections -}}

<div id="article-container">
    {{ if (eq $.Params.toc "general") }}
        <aside id="toc" class="toc">
            <div class="toc-title">Table des matières</div>
            {{ range $i, $num := (seq $ContentLen) }}
            <div class="section-link" data-section={{ $i }}>
            {{ (index $ContentSections $i).TableOfContents }}
            </div>
            {{ end }}
        </aside>
        {{ range $i, $num := (seq $ContentLen) }}
            <article id="section-{{ $num }}" class="container">
                <a id="top"></a>
                    {{ (index $ContentSections $i).Content }}
                    {{ if (eq $num $ContentLen) }}     
                    <a id="go-back-button" href='{{ ref $.Page "." }}'>Retour au Menu</a>
                    <div id="confettis-container">
                        {{ range $i := (seq 100) }}
                        <i class="confetti"></i>
                        {{ end }}
                    </div>
                    {{ end }}
            </article>
        {{ end }}
    {{ else }}
        {{ range $i, $num := (seq $ContentLen) }}
            {{ if (index $ContentSections $i).Params.show_toc }}
            <aside id="toc-{{ $num }}" class="toc">
                <div class="toc-title">Table des matières</div>
                {{ (index $ContentSections $i).TableOfContents }}
            </aside>
            {{ end }}
            <article id="section-{{ $num }}" class="container">
                <a id="top"></a>
                    {{ (index $ContentSections $i).Content }}
                    {{ if (eq $num $ContentLen) }}     
                    <a id="go-back-button" href='{{ ref $.Page "."}}'>Retour au Menu</a>
                    <div id="confettis-container">
                        {{ range $i := (seq 100) }}
                        <i class="confetti"></i>
                        {{ end }}
                    </div>
                    {{ end }}
            </article>
        {{ end }}
    {{ end }}
</div>

<div class="section-button prev-button">
    <svg width="40px" height="40px" viewBox="0 0 80 80" xml:space="preserve">
        <polyline
            fill="none" stroke="#000000" stroke-width="10"
            stroke-linecap="round" stroke-linejoin="round"
            points="55,75 20,40 55,5 "
        />
    </svg>
</div>
<div class="section-button next-button">
    <svg width="40px" height="40px" viewBox="0 0 80 80" xml:space="preserve">
        <polyline
            fill="none" stroke="#000000" stroke-width="10"
            stroke-linecap="round" stroke-linejoin="round"
            points="25,75 60,40 25,5"
        />
    </svg>
</div>


<div id="imgzoom"></div>

{{- partial "footer_post.html" . -}}

<script src="/js/section_break.js" type="text/javascript"></script>

{{ end }}
